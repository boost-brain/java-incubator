(function(t){function e(e){for(var o,i,n=e[0],c=e[1],l=e[2],d=0,p=[];d<n.length;d++)i=n[d],a[i]&&p.push(a[i][0]),a[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(p.length)p.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],o=!0,n=1;n<s.length;n++){var c=s[n];0!==a[c]&&(o=!1)}o&&(r.splice(e--,1),t=i(i.s=s[0]))}return t}var o={},a={app:0},r=[];function i(e){if(o[e])return o[e].exports;var s=o[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=o,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(s,o,function(e){return t[e]}.bind(null,o));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],c=n.push.bind(n);n.push=e,n=n.slice();for(var l=0;l<n.length;l++)e(n[l]);var u=c;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"039a":function(t,e,s){"use strict";var o=s("fd06"),a=s.n(o);a.a},1:function(t,e){},"54d8":function(t,e,s){"use strict";var o=s("b9f9"),a=s.n(o);a.a},"56d7":function(t,e,s){"use strict";s.r(e);var o=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-app-bar",{attrs:{app:""}},[s("v-toolbar-title",[s("router-link",{staticClass:"pointer",attrs:{to:"/",tag:"span"}},[t._v("Каталог студентов")])],1),s("v-spacer"),s("v-toolbar-items",{staticClass:"hidden-sm-and-down"},t._l(t.links,function(e){return s("v-btn",{key:e.title,attrs:{to:e.url,text:""}},[s("v-icon",{attrs:{left:""}},[t._v(t._s(e.icon))]),t._v("\n        "+t._s(e.title)+"\n      ")],1)}),1)],1),s("v-content",[s("router-view")],1)],1)},r=[],i=s("2f62"),n={name:"App",data(){return{drawer:!0,links:[{title:"Личный кабинет",icon:"perm_identity",url:"/profile"},{title:"Выход",icon:"logout",url:"/logout"}]}},methods:{...Object(i["d"])(["AUTH_LOGOUT"])}},c=n,l=s("2877"),u=s("6544"),d=s.n(u),p=s("7496"),m=s("40dc"),v=s("8336"),g=s("a75b"),h=s("132d"),f=s("2fa4"),b=s("2a7f"),j=Object(l["a"])(c,a,r,!1,null,null,null),k=j.exports;d()(j,{VApp:p["a"],VAppBar:m["a"],VBtn:v["a"],VContent:g["a"],VIcon:h["a"],VSpacer:f["a"],VToolbarItems:b["a"],VToolbarTitle:b["b"]});s("d1e7");var x=s("8c4f"),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},t._l(t.projects,function(e){return s("v-card",{key:e.projectId,staticClass:"elevation-10 mb-3"},[s("v-card-title",{attrs:{"primary-title":""}},[s("div",[s("h3",{staticClass:"headline mb-0"},[t._v(t._s(e.projectName))]),s("div",[t._v(" "+t._s(e.description)+" ")]),s("div",[t._v(" "+t._s(e.projectUrl)+" ")]),s("div",[t._v(" "+t._s(e.projectId)+" ")])])]),s("v-card-actions",[s("v-btn",{staticClass:"info",attrs:{to:"/project/"+e.projectId}},[t._v(" Открыть ")])],1)],1)}),1)],1)],1)},_=[],V=s("28dd");o["a"].use(V["a"]);const T="http://localhost:9000/api/projects";var w={get:()=>o["a"].resource(T+"/all").get(),find:t=>o["a"].resource(T+"/findById{/projectId}").get(t),add:t=>o["a"].resource(T+"/createProject{/id}").save({},t),update:t=>o["a"].resource(T+"/update").save(t),remove:t=>o["a"].resource(T+"/delete{/id}").remove({project_id:t})},U={methods:{next(){console.log("next()"),w.get().then(t=>{this.setProjects(t.body)}).catch(t=>{console.log(t)})},...Object(i["d"])(["addProjectMutation","setProjects"])},computed:{projects(){return this.$store.getters.projects}},created(){console.log("load projects ()"),this.next()}},I=U,C=s("b0af"),L=s("99d9"),P=s("a523"),$=s("0e8f"),M=s("a722"),A=Object(l["a"])(I,y,_,!1,null,null,null),O=A.exports;d()(A,{VBtn:v["a"],VCard:C["a"],VCardActions:L["a"],VCardTitle:L["c"],VContainer:P["a"],VFlex:$["a"],VLayout:M["a"]});var S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("v-card",{directives:[{name:"show",rawName:"v-show",value:t.isNull,expression:"isNull"}]},[s("v-card-text",[s("v-text-field",{attrs:{label:"id",readonly:""},model:{value:t.project.projectId,callback:function(e){t.$set(t.project,"projectId",e)},expression:"project.projectId"}}),s("v-text-field",{attrs:{label:"Адрес",readonly:""},model:{value:t.project.description,callback:function(e){t.$set(t.project,"description",e)},expression:"project.description"}}),s("v-text-field",{attrs:{label:"Название",readonly:""},model:{value:t.project.projectName,callback:function(e){t.$set(t.project,"projectName",e)},expression:"project.projectName"}}),s("v-text-field",{attrs:{label:"Адрес",readonly:""},model:{value:t.project.projectUrl,callback:function(e){t.$set(t.project,"projectUrl",e)},expression:"project.projectUrl"}})],1),s("v-card-actions",[s("v-spacer"),s("addEditProjectModal",{attrs:{project:t.project}}),s("v-btn",{staticClass:"success ml-1",on:{click:t.removeProject}},[t._v("\n                        Удалить\n                    ")])],1)],1)],1)],1)],1)},E=[],H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-dialog",{attrs:{width:"400px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on;return[s("v-btn",t._g({staticClass:"warning",attrs:{text:""}},o),[t._v("Изменить")])]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("v-card",[s("v-container",[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card-title",[s("h3",{staticClass:"text--primary"},[t._v("Проект №"+t._s(this.project.projectId))])])],1)],1),s("v-divider"),s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card-text",[s("v-text-field",{attrs:{name:"projectName",label:"Наименование проекта",type:"text"},model:{value:t.editedName,callback:function(e){t.editedName=e},expression:"editedName"}}),s("v-text-field",{attrs:{name:"URL",label:"URL",type:"text"},model:{value:t.editedURL,callback:function(e){t.editedURL=e},expression:"editedURL"}}),s("v-text-field",{attrs:{name:"Description",label:"Описание",type:"text"},model:{value:t.editedDescription,callback:function(e){t.editedDescription=e},expression:"editedDescription"}})],1)],1)],1),s("v-divider"),s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.onCancel}},[t._v("Отмена")]),s("v-btn",{staticClass:"success",attrs:{text:""},on:{click:t.onSave}},[t._v("Сохранить")])],1)],1)],1)],1)],1)],1)},R=[],D={props:["project"],data(){return{modal:!1,editedID:this.project["projectId"],editedDescription:this.project.description,editedURL:this.project.projectUrl,editedName:this.project.projectName}},methods:{...Object(i["b"])(["updateProjectAction"]),onCancel(){this.editedID=this.project.projectId,this.editedDescription=this.project.description,this.editedURL=this.project.projectUrl,this.editedName=this.project.projectName,this.modal=!1},onSave(){""!==this.editedID&&""!==this.editedURL&&""!==this.editedDescription&&(this.updateProjectAction({projectId:this.editedID,description:this.editedDescription,projectUrl:this.editedURL,projectName:this.editedName}),this.modal=!1)}}},N=D,q=s("169a"),B=s("ce7e"),F=s("8654"),G=Object(l["a"])(N,H,R,!1,null,null,null),Q=G.exports;d()(G,{VBtn:v["a"],VCard:C["a"],VCardActions:L["a"],VCardText:L["b"],VCardTitle:L["c"],VContainer:P["a"],VDialog:q["a"],VDivider:B["a"],VFlex:$["a"],VLayout:M["a"],VSpacer:f["a"],VTextField:F["a"]});var z={name:"project",props:["projectId"],computed:{project(){const t=this.projectId;return this.$store.getters.projectById(t)}},components:{addEditProjectModal:Q},methods:{...Object(i["b"])(["removeProjectAction"]),removeProject(){console.log("removeProject()"),this.removeProjectAction(this.project),this.$router.push("/Projects")},isNull(){return null!==this.project}}},J=z,K=(s("54d8"),Object(l["a"])(J,S,E,!1,null,null,null)),W=K.exports;d()(K,{VBtn:v["a"],VCard:C["a"],VCardActions:L["a"],VCardText:L["b"],VContainer:P["a"],VFlex:$["a"],VLayout:M["a"],VSpacer:f["a"],VTextField:F["a"]});var X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("v-app",{attrs:{id:"inspire"}},[s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",tile:""}},[s("v-list",{attrs:{flat:""}},[s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},t._l(t.users,function(e,o){return s("v-list-item",{key:o},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),s("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.email)}})],1)],1)}),1)],1),s("v-pagination",{attrs:{length:t.pagination.total,"total-visible":t.pagination.visible},on:{input:t.next},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},Y=[];o["a"].use(V["a"]);const Z="http://localhost:9000/api/users";var tt={count:()=>o["a"].resource(Z+"/count").get(),get:t=>o["a"].resource(Z+"/page/"+t+"/2").get(),add:t=>o["a"].resource(Z+"/create").save(t),read:t=>o["a"].resource(Z+"/read{/email}").get({email:t}),update:t=>o["a"].resource(Z+"/update").update(t),remove:t=>o["a"].resource(Z+"/delete{/email}").remove({email:t})},et={name:"Users",data(){return{item:1,pagination:{page:2,total:4,perPage:20,visible:7}}},methods:{next(t){console.log("next()"),tt.get(t).then(t=>{this.setUsers(t.body)}).catch(t=>{console.log(t)})},...Object(i["d"])(["addUserMutation","updateUserMutation","removeUserMutation","emptyUsers","setUsers"]),...Object(i["b"])(["getUserCount"])},computed:{users(){return this.$store.getters.users}},created(){this.getUserCount(),this.emptyUsers(),this.pagination.total=1+~~(this.$store.getters.getUserCount/2),this.next(1)}},st=et,ot=s("8860"),at=s("da13"),rt=s("5d23"),it=s("1baa"),nt=s("891e"),ct=Object(l["a"])(st,X,Y,!1,null,"41bb2f97",null),lt=ct.exports;d()(ct,{VApp:p["a"],VCard:C["a"],VList:ot["a"],VListItem:at["a"],VListItemContent:rt["a"],VListItemGroup:it["a"],VListItemSubtitle:rt["b"],VListItemTitle:rt["c"],VPagination:nt["a"]});var ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("v-app",{attrs:{id:"inspire"}},[s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"300",tile:""}},[s("v-list",{attrs:{flat:""}},[s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},t._l(t.tasks,function(e,o){return s("v-list-item",{key:o},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),s("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.id)}})],1)],1)}),1)],1),s("v-pagination",{attrs:{length:t.pagination.total,"total-visible":t.pagination.visible},on:{input:t.next},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)},dt=[];const pt="AUTH_REQUEST",mt="AUTH_SUCCESS",vt="AUTH_ERROR",gt="AUTH_LOGOUT";o["a"].use(V["a"]);const ht="http://localhost:9000/api/auth";var ft={login:t=>o["a"].resource(ht+"/login").save(t)};const bt={token:localStorage.getItem("user-token")||"",sessionId:localStorage.getItem("sessionId")||"",status:"",error:"",hasLoadedOnce:!1,user:{name:"",email:""}},jt={isAuthenticated:t=>!!t.token,authStatus:t=>t.status,getToken:t=>t.token,getSessionId:()=>bt.sessionId,getUser:t=>t.user},kt={async AUTH_REQUEST({commit:t,state:e},s){try{console.log("AUTH_REQUEST action run.");const a=await ft.login(s),r=await a.json();if(console.log(r),null!=r.sessionId){const o=await tt.read(s.login),a=await o.json();t("setUser",a),e.sessionId=r.sessionId,console.log(a),t(mt,r);const i={...r,...a};localStorage.setItem("user-token",i),console.log(i)}else e.error="unauth",console.log("AUTH FAILED"),t(vt,e),localStorage.removeItem("user-token")}catch(o){console.log(o)}},[gt]:({commit:t})=>{return new Promise(e=>{t(gt),localStorage.removeItem("user-token"),e()})}},xt={[pt]:t=>{console.log("AUTH_REQUEST mutation"),t.status="loading"},[mt]:(t,e)=>{console.log("AUTH_SUCCESS mutation"),t.status="success",t.token=e,t.hasLoadedOnce=!0,console.log("AUTH_SUCCESS mutation OK")},setUser:(t,e)=>{console.log("SetUser mutation"),console.log(e),t.user.email=e.email,t.user.name=e.name,console.log("SetUser mutation OK")},[vt]:t=>{console.log("AUTH_ERROR mutation"),t.status="error",t.hasLoadedOnce=!0},[gt]:t=>{console.log("AUTH_LOGOUT mutation"),t.token=""}};var yt={state:bt,getters:jt,actions:kt,mutations:xt};o["a"].use(V["a"]),o["a"].http.interceptors.push((t,e)=>{t.headers.set("sessionId",yt.getters.getSessionId()),console.log(t),e()});const _t="http://localhost:9000/api/tasks";var Vt={count:()=>o["a"].resource(_t+"/count").get(),get:t=>o["a"].resource(_t+"/page/"+t+"/2").get(),add:t=>o["a"].resource(_t+"/create").save(t),update:t=>o["a"].resource(_t+"/update").update(t),remove:t=>o["a"].resource(_t+"/delete{/id}").remove({id:t}),for:t=>o["a"].resource(_t+"/for{/user}").get({user:t})},Tt={name:"Tasks",data(){return{item:1,pagination:{page:2,total:4,perPage:20,visible:7}}},methods:{...Object(i["d"])(["addTaskMutation","updateTaskMutation","removeTaskMutation","emptyTasks","setTasks"]),...Object(i["b"])(["getTaskCount"]),next(t){console.log("next()"),Vt.get(t).then(t=>{console.log("response"),console.log(t),this.setTasks(t.body)}).catch(t=>{console.log("error"),console.log(t)})}},computed:{tasks(){return this.$store.getters.tasks}},created(){this.getTaskCount(),this.emptyTasks(),this.pagination.total=1+~~(this.$store.getters.getTaskCount/2),this.next(1)}},wt=Tt,Ut=Object(l["a"])(wt,ut,dt,!1,null,"1edcb2ad",null),It=Ut.exports;d()(Ut,{VApp:p["a"],VCard:C["a"],VList:ot["a"],VListItem:at["a"],VListItemContent:rt["a"],VListItemGroup:it["a"],VListItemSubtitle:rt["b"],VListItemTitle:rt["c"],VPagination:nt["a"]});var Ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{"grid-list-md":""}},[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm10:"","offset-sm1":""}},[s("v-tabs",{attrs:{"background-color":"white",centered:""}},[s("v-tab",{key:"'data'"},[s("v-icon",{attrs:{left:""}},[t._v("account_circle")]),t._v("\n                        Мои данные\n                    ")],1),s("v-tab",{key:"'tasks'"},[s("v-icon",{attrs:{left:""}},[t._v("done_all")]),t._v("\n                        Мои задачи\n                    ")],1),s("v-tab",{key:"'projects'"},[s("v-icon",{attrs:{left:""}},[t._v("list")]),t._v("\n                        Мои проекты\n                    ")],1),s("v-tab-item",{key:"data"},[s("user-profile-data")],1),s("v-tab-item",{key:"tasks"},[s("user-profile-tasks")],1),s("v-tab-item",{key:"projects"},[s("user-profile-projects")],1)],1)],1)],1)],1)},Lt=[],Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-app",{attrs:{id:"inspire"}},[s("v-card",[s("v-list-item",{attrs:{"three-line":""}},[s("v-list-item-content",[s("div",{staticClass:"overline mb-4"},[t._v("Новобранец")]),s("v-list-item-title",[t._v(t._s(t.user.name))]),s("v-list-item-subtitle",[t._v(" "+t._s(t.user.email)+" ")])],1),s("v-list-item-avatar",{attrs:{tile:"",size:"80",color:"grey"}})],1)],1)],1)],1)},$t=[],Mt={computed:{user(){return this.$store.getters.getUser}}},At=Mt,Ot=s("8270"),St=Object(l["a"])(At,Pt,$t,!1,null,"824871ea",null),Et=St.exports;d()(St,{VApp:p["a"],VCard:C["a"],VListItem:at["a"],VListItemAvatar:Ot["a"],VListItemContent:rt["a"],VListItemSubtitle:rt["b"],VListItemTitle:rt["c"]});var Ht=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("v-app",{attrs:{id:"inspire"}},[s("v-card",{staticClass:"text-start",attrs:{"min-width":"480"}},[s("v-list",{attrs:{"three-line":"",subheader:"","min-width":"480"}},[s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},t._l(t.projects,function(e,o){return s("v-list-item",{key:o,attrs:{"three-line":""},on:{click:function(s){return t.$router.push("/project/"+e.projectId)}}},[s("v-list-item-content",[s("v-list-item-title",[t._v(t._s(e.description))]),s("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.projectId)}}),s("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.projectName)}})],1)],1)}),1)],1)],1)],1)],1)},Rt=[],Dt={data(){return{item:1}},methods:{...Object(i["c"])(["getUser","getTasks","getProjects"]),...Object(i["d"])(["emptyProjects","setProjects"]),...Object(i["b"])(["getUserTasks","getProjectsByIdList"])},computed:{projects(){return this.getProjects()}},created(){console.log("Created UserProfileProjects()"),this.emptyProjects(),this.getProjectsByIdList(this.getTasks().map(t=>t.project))}},Nt=Dt,qt=Object(l["a"])(Nt,Ht,Rt,!1,null,"3cfe673b",null),Bt=qt.exports;d()(qt,{VApp:p["a"],VCard:C["a"],VList:ot["a"],VListItem:at["a"],VListItemContent:rt["a"],VListItemGroup:it["a"],VListItemSubtitle:rt["b"],VListItemTitle:rt["c"]});var Ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("v-app",{attrs:{id:"inspire"}},[s("v-card",{staticClass:"text-start",attrs:{"min-width":"480"}},[s("v-list",{attrs:{"two-line":"",subheader:"","min-width":"480"}},[s("v-list-item-group",{attrs:{color:"primary"},model:{value:t.item,callback:function(e){t.item=e},expression:"item"}},t._l(t.tasks,function(e,o){return s("v-list-item",{key:o},[s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),s("v-list-item-subtitle",{domProps:{innerHTML:t._s(e.id)}})],1)],1)}),1)],1)],1)],1)],1)},Gt=[],Qt={name:"Tasks",data(){return{item:1,pagination:{page:2,total:4,perPage:20,visible:7}}},methods:{...Object(i["c"])(["getUser","getTasks"]),...Object(i["d"])(["emptyTasks"]),...Object(i["b"])(["getUserTasks"])},computed:{tasks(){return this.getTasks()}},created(){console.log("Created UserProfileTasks()"),this.emptyTasks(),this.getUserTasks(this.getUser().email)}},zt=Qt,Jt=Object(l["a"])(zt,Ft,Gt,!1,null,"de98242c",null),Kt=Jt.exports;d()(Jt,{VApp:p["a"],VCard:C["a"],VList:ot["a"],VListItem:at["a"],VListItemContent:rt["a"],VListItemGroup:it["a"],VListItemSubtitle:rt["b"],VListItemTitle:rt["c"]});var Wt={name:"Profile",tabMode:"data",data(){return{tabMode:"data"}},components:{userProfileData:Et,userProfileTasks:Kt,userProfileProjects:Bt}},Xt=Wt,Yt=s("71a3"),Zt=s("c671"),te=s("fe57"),ee=Object(l["a"])(Xt,Ct,Lt,!1,null,"e3243370",null),se=ee.exports;d()(ee,{VContainer:P["a"],VFlex:$["a"],VIcon:h["a"],VLayout:M["a"],VTab:Yt["a"],VTabItem:Zt["a"],VTabs:te["a"]});var oe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",[s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[s("h1",{staticClass:"text--secondary mb-3"},[t._v("Регистрация")]),s("v-form",{ref:"form",staticClass:"mb-3",attrs:{validation:""}},[s("v-text-field",{class:{"is-invalid":t.$v.email.$error},attrs:{autocomplete:"off",name:"email",label:"Email:",type:"text","error-messages":t.$v.email.$dirty&&!t.$v.email.required?["Обязательно к заполнению"]:t.$v.email.email?[]:["Введите корректный email"]},on:{blur:function(e){return t.$v.email.$touch()}},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),s("v-text-field",{class:{"is-invalid":t.$v.gitHubId.$error},attrs:{name:"gitHubId",label:"Id на github.com:",type:"text","error-messages":t.$v.gitHubId.$dirty&&!t.$v.gitHubId.required?["Обязательно к заполнению"]:[]},on:{blur:function(e){return t.$v.gitHubId.$touch()}},model:{value:t.gitHubId,callback:function(e){t.gitHubId=e},expression:"gitHubId"}}),s("v-text-field",{class:{"is-invalid":t.$v.name.$error},attrs:{label:"Ваше имя:",name:"name",type:"text","error-messages":t.$v.name.$dirty&&!t.$v.name.required?["Обязательно к заполнению"]:[]},on:{blur:function(e){return t.$v.name.$touch()}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),s("v-text-field",{class:{"is-invalid":t.$v.hours.$error},attrs:{name:"hours",label:"Сколько часов в день в среднем Вы готовы уделять проекту?","error-messages":t.$v.hours.$dirty&&!t.$v.hours.required?["Обязательно к заполнению"]:t.$v.hours.numeric?t.$v.hours.minValue?[]:["Число часов должно быть больше 1"]:["Введите числовое значение"],type:"text"},on:{blur:function(e){return t.$v.hours.$touch()}},model:{value:t.hours,callback:function(e){t.hours=e},expression:"hours"}}),s("v-text-field",{class:{"is-invalid":t.$v.password.$error},attrs:{label:"Задайте пароль:","append-icon":t.show?"visibility":"visibility_off",type:t.show?"text":"password","error-messages":t.$v.password.minLength?[]:["Минимальная длина пароля 6"],required:""},on:{"click:append":function(e){t.show=!t.show},blur:function(e){return t.$v.password.$touch()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),s("v-layout",{attrs:{row:""}},[s("v-flex",{attrs:{xs12:""}},[s("v-spacer"),s("v-btn",{staticClass:"success",on:{click:t.save}},[t._v("\n                        Создать\n                    ")]),s("p"),this.error.error?s("v-alert",{attrs:{type:"error"}},[t._v("\n                        error: "+t._s(this.error)+"\n                    ")]):t._e()],1)],1)],1)],1)],1)},ae=[],re=s("b5ae"),ie={name:"NewUser",data(){return{email:"",gitHubId:"",name:"",password:"",show:!1,error:{},hours:1,createDate:0,updateDate:0}},methods:{...Object(i["b"])(["registerAction"]),save(){if(console.log("register()"),this.$refs.form.validate()){const t={email:this.email,password:this.password,createDate:this.createDate,gitHubId:this.gitHubId,hours:this.hours,name:this.name,updateDate:this.updateDate};this.$store.dispatch("registerAction",t).then(()=>{console.log("success registration!"),this.$router.push("/login")}).catch(t=>{this.error=t.body,console.log(this.error)})}}},validations:{email:{required:re["required"],email:re["email"]},gitHubId:{required:re["required"]},name:{required:re["required"]},hours:{required:re["required"],numeric:re["numeric"],minValue:Object(re["minValue"])(1)},password:{minLength:Object(re["minLength"])(6)}}},ne=ie,ce=s("0798"),le=s("4bd4"),ue=Object(l["a"])(ne,oe,ae,!1,null,"0fafa773",null),de=ue.exports;d()(ue,{VAlert:ce["a"],VBtn:v["a"],VContainer:P["a"],VFlex:$["a"],VForm:le["a"],VLayout:M["a"],VSpacer:f["a"],VTextField:F["a"]});var pe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{attrs:{id:"inspire"}},[s("v-content",[s("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[s("v-toolbar-title",[t._v("Форма входа")]),s("div",{staticClass:"flex-grow-1"})],1),s("v-card-text",[s("v-form",{attrs:{id:"login-form"},on:{submit:function(e){return e.preventDefault(),t.doLogin(e)}}},[s("v-text-field",{attrs:{label:"Пользователь","prepend-icon":"person",type:"text"},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}}),s("v-text-field",{attrs:{id:"password",label:"Пароль","prepend-icon":"lock",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),s("v-card-actions",[s("div",{staticClass:"flex-grow-1"}),s("router-link",{staticClass:"btn btn-link",attrs:{to:"/new"}},[t._v("Регистрация нового студента")]),s("v-btn",{attrs:{color:"primary",type:"submit",form:"login-form"}},[t._v("Вход")]),s("br")],1),s("p"),this.error.error?s("v-alert",{attrs:{type:"warning"}},[t._v("\n                            "+t._s(this.error)+"\n                        ")]):t._e()],1)],1)],1)],1)],1)],1)},me=[],ve={name:"login",data(){return{login:"",password:"",error:{}}},methods:{...Object(i["b"])(["AUTH_REQUEST"]),doLogin:function(){try{console.log("login: "+this.login+" "+this.password);const e={login:this.login,password:this.password};console.log(e),this.AUTH_REQUEST(e,"user").then(()=>{this.$router.push("/"),this.error={message:"Request is unathorized",error:"AUTH_ERROR"}}).catch(t=>{this.error=t.body,console.log(this.error)})}catch(t){console.log(t)}}}},ge=ve,he=(s("039a"),s("62ad")),fe=s("0fd9"),be=s("71d9"),je=Object(l["a"])(ge,pe,me,!1,null,null,null),ke=je.exports;d()(je,{VAlert:ce["a"],VApp:p["a"],VBtn:v["a"],VCard:C["a"],VCardActions:L["a"],VCardText:L["b"],VCol:he["a"],VContainer:P["a"],VContent:g["a"],VForm:le["a"],VRow:fe["a"],VTextField:F["a"],VToolbar:be["a"],VToolbarTitle:b["b"]});var xe={state:{users:[],userCount:0},mutations:{setUsers(t,e){console.log("setUsers mutation"),t.users=e},emptyUsers(t){t.users=[]},createUser(t,e){t.users.push(e)},addUserMutation:function(t,e){console.log("addUserMutation"),t.users=[...t.users,e]},updateUserMutation(t,e){console.log("updateUserMutation");const s=t.users.findIndex(t=>t.email===e["email"]);t.users=[...t.users.slice(0,s),e,...t.users.slice(s+1)]},removeUserMutation(t,e){console.log("removeUserMutation");const s=t.users.findIndex(t=>t["email"]===e["@email"]);s>-1&&(t.users=[...t.users.slice(0,s),...t.users.slice(s+1)])},setUserCount(t,e){console.log("setUserCount mutation"),t.userCount=e}},actions:{async loadUsersAction({commit:t}){t("setLoading",!0),await this.state.resource.get().then(t=>t.json()).then(e=>{for(var s of e)t("addUserMutation",s)}),t("setLoading",!1)},async addUserAction({commit:t,state:e},s){const o=await tt.add(s),a=await o.json(),r=e.users.findIndex(t=>t["id"]===a["@id"]);t(r>-1?"updateUserMutation":"addUserMutation",a)},async updateUserAction({commit:t},e){const s=await tt.update(e);console.log(e);const o=await s.json();t("updateUserMutation",o)},async removeUserAction({commit:t},e){const s=await tt.remove(e.email);s.ok&&t("removeUserMutation",e)},async getUserCount({commit:t}){console.log("getUserCount action");const e=await tt.count(),s=await e.json();t("setUserCount",s)}},getters:{getUserCount(t){return t.userCount},users(t){return t.users}}};o["a"].use(V["a"]);const ye="http://localhost:9000/api/register";var _e={register:t=>o["a"].resource(ye+"/create").save(t)},Ve={state:{users:[]},mutations:{registerMutation:function(t,e){console.log("registerMutation"),t.users=[...t.users,e]}},actions:{async registerAction({commit:t},e){const s=await _e.register(e),o=await s.json();console.log(o),t("registerMutation",o)}}},Te={state:{tasks:[],taskCount:0},mutations:{setTasks(t,e){console.log("setTasks mutation"),t.tasks=e},emptyTasks(t){t.tasks=[]},createTask(t,e){t.tasks.push(e)},addTaskMutation:function(t,e){console.log("addTaskMutation"),t.tasks=[...t.tasks,e]},updateTaskMutation(t,e){console.log("updateTaskMutation");const s=t.tasks.findIndex(t=>t.id===e["id"]);t.tasks=[...t.tasks.slice(0,s),e,...t.tasks.slice(s+1)]},removeTaskMutation(t,e){console.log("removeTaskMutation");const s=t.tasks.findIndex(t=>t["id"]===e["@id"]);s>-1&&(t.tasks=[...t.tasks.slice(0,s),...t.tasks.slice(s+1)])},setTaskCount(t,e){console.log("setTaskCount mutation"),t.taskCount=e}},actions:{async getUserTasks({commit:t},e){try{t("setLoading",!0);const o=await Vt.for(e);console.log(o);const a=await o.json();t("setTasks",a),t("setLoading",!1)}catch(s){console.log(s)}},async loadTasksAction({commit:t}){t("setLoading",!0),await this.state.resource.get().then(t=>t.json()).then(e=>{for(var s of e)t("addTaskMutation",s)}),t("setLoading",!1)},async addTaskAction({commit:t,state:e},s){const o=await Vt.add(s),a=await o.json(),r=e.tasks.findIndex(t=>t["id"]===a["@id"]);t(r>-1?"updateTaskMutation":"addTaskMutation",a)},async updateTaskAction({commit:t},e){const s=await Vt.update(e);console.log(e);const o=await s.json();t("updateTaskMutation",o)},async removeTaskAction({commit:t},e){const s=await Vt.remove(e.id);s.ok&&t("removeTaskMutation",e)},async getTaskCount({commit:t}){console.log("getTaskCount action");const e=await Vt.count(),s=await e.json();t("setTaskCount",s)}},getters:{getTaskCount(t){return t.taskCount},getTasks(t){return t.tasks}}},we={state:{projects:[],isLoading:!1,resource:{}},mutations:{setProjects(t,e){console.log("setProjects mutation"),t.projects=e},createProject(t,e){t.projects.push(e)},emptyProjects(t){t.projects=[]},addProjectMutation:function(t,e){console.log("addProjectMutation"),t.projects=[...t.projects,e]},updateProjectMutation(t,e){console.log("updateProjectMutation");const s=t.projects.findIndex(t=>t.id===e["id"]);t.projects=[...t.projects.slice(0,s),e,...t.projects.slice(s+1)]},removeProjectMutation(t,e){console.log("removeProjectMutation");const s=t.projects.findIndex(t=>t["id"]===e["id"]);s>-1&&(t.projects=[...t.projects.slice(0,s),...t.projects.slice(s+1)])},setLoading(t,e){t.isLoading=e}},getters:{getProjects(t){return t.projects},projectById(t){return e=>{return t.projects.find(t=>t.id==e)}}},actions:{async getProjectsByIdList({commit:t},e){console.log("getProjectsByIdList run");var s=new Set(e);console.log(s),t("setLoading",!0);const o=await w.get(),a=await o.json();console.log(a);const r=a.filter(t=>s.has(t.projectId)),i=Array.from(r);for(var n of(console.log(i),i))console.log(n),t("addProjectMutation",n);t("setLoading",!1)},async loadAction({commit:t}){t("setLoading",!0),await this.state.resource.get().then(t=>t.json()).then(e=>{for(var s of e)t("addProjectMutation",s)}),t("setLoading",!1)},async addProjectAction({commit:t,state:e},s){const o=await w.add(s),a=await o.json(),r=e.projects.findIndex(t=>t["projectId"]===a["@projectId"]);console.log(r),t(r>-1?"updateProjectMutation":"addProjectMutation",a)},async updateProjectAction({commit:t},e){const s=await w.update(e);console.log(e);const o=await s.json();t("updateProjectMutation",o)},async removeProjectAction({commit:t},e){const s=await w.remove(e.projectId);s.ok&&t("removeProjectMutation",e)}}};o["a"].use(i["a"]);var Ue=new i["a"].Store({modules:{auth:yt,users:xe,register:Ve,tasks:Te,projects:we},state:{title:"Hello from store"},getters:{title(t){return t.title+"!!!"}}});o["a"].use(x["a"]);const Ie=(t,e,s)=>{Ue.getters.isAuthenticated?s("/"):s()},Ce=(t,e,s)=>{console.log(Ue.getters.getToken),Ue.getters.isAuthenticated?s():s("/login")},Le=(t,e,s)=>{console.log("logout"),Ue.dispatch(gt),s()};var Pe=new x["a"]({mode:"history",routes:[{path:"/",name:"base",component:lt,beforeEnter:Ce},{path:"/projects",name:"projects",component:O,beforeEnter:Ce},{path:"/users",name:"users",component:lt,beforeEnter:Ce},{path:"/tasks",name:"tasks",component:It,beforeEnter:Ce},{path:"/project/:id",props:!0,name:"project",component:W,beforeEnter:Ce},{path:"/new",name:"newUser",component:de,beforeEnter:Ie},{path:"/login",name:"Login",component:ke,beforeEnter:Ie},{path:"/logout",name:"Logout",component:ke,beforeEnter:Le},{path:"/profile",name:"Profile",component:se,beforeEnter:Ce}]}),$e=s("f309");o["a"].use($e["a"]);var Me=new $e["a"]({icons:{iconfont:"mdi"}}),Ae=s("1dce"),Oe=s.n(Ae);o["a"].use(V["a"]),o["a"].use(Oe.a),new o["a"]({router:Pe,store:Ue,vuetify:Me,render:t=>t(k)}).$mount("#app")},b9f9:function(t,e,s){},fd06:function(t,e,s){}});
//# sourceMappingURL=app.a1e823bb.js.map